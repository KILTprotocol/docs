"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[3885],{7603:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>s,contentTitle:()=>o,default:()=>d,frontMatter:()=>i,metadata:()=>c,toc:()=>l});var a=n(5893),r=n(1151);const i={id:"benchmarking",title:"Benchmark Your Collator"},o=void 0,c={id:"participate/staking/advanced_collator_section/benchmarking",title:"Benchmark Your Collator",description:"To enable benchmarking, the collator must enable the benchmarking feature from a new build of the kilt-parachain.",source:"@site/docs/participate/01_staking/02_advanced_collator_section/06_benchmarking.md",sourceDirName:"participate/01_staking/02_advanced_collator_section",slug:"/participate/staking/advanced_collator_section/benchmarking",permalink:"/docs/participate/staking/advanced_collator_section/benchmarking",draft:!1,unlisted:!1,editUrl:"https://github.com/KILTprotocol/docs/edit/master/docs/participate/01_staking/02_advanced_collator_section/06_benchmarking.md",tags:[],version:"current",lastUpdatedAt:1707906150,formattedLastUpdatedAt:"Feb 14, 2024",sidebarPosition:6,frontMatter:{id:"benchmarking",title:"Benchmark Your Collator"},sidebar:"staking",previous:{title:"Bootnodes",permalink:"/docs/participate/staking/advanced_collator_section/bootnodes"},next:{title:"Overview",permalink:"/docs/participate/staking/delegate/overview"}},s={},l=[];function h(e){const t={a:"a",admonition:"admonition",code:"code",p:"p",pre:"pre",...(0,r.a)(),...e.components};return(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)(t.p,{children:["To enable benchmarking, the collator must enable the benchmarking feature from a new build of the ",(0,a.jsx)(t.code,{children:"kilt-parachain"}),"."]}),"\n",(0,a.jsx)(t.admonition,{title:"Don't use this binary for running the Collator!",type:"caution",children:(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash=",children:"cargo build --release -p kilt-parachain --features=runtime-benchmarks\n"})})}),"\n",(0,a.jsx)(t.p,{children:"The benchmarks can be run to compare the server's hardware capabilities against the referenced hardware.\nAt the moment, we have benchmarked the Spiritnet and Peregrine runtimes on an AMD Ryzen 7 1700X with 64GB RAM and an NVMe SSD.\nAfter executing the benchmarks on a server compare the weights to the official KILT weights.\nYour weight results should at least be similar to the official ones and the lower yours are, the better."}),"\n",(0,a.jsxs)(t.p,{children:["The commands executed to benchmark the KILT runtimes can be found in the official benchmark files for both ",(0,a.jsx)(t.a,{href:"https://github.com/KILTprotocol/kilt-node/tree/master/runtimes/spiritnet/src/weights",children:"Spiritnet"})," and ",(0,a.jsx)(t.a,{href:"https://github.com/KILTprotocol/kilt-node/tree/master/runtimes/peregrine/src/weights",children:"Peregrine"}),"."]}),"\n",(0,a.jsxs)(t.p,{children:["Below is an example of benchmarking for the the ",(0,a.jsx)(t.code,{children:"balances"})," pallet."]}),"\n",(0,a.jsx)(t.pre,{children:(0,a.jsx)(t.code,{className:"language-bash=",children:"./target/release/kilt-parachain \\\n  benchmark \\\n  --chain=spiritnet-dev \\\n  --execution=wasm \\\n  --wasm-execution=Compiled \\\n  --heap-pages=4096 \\\n  --extrinsic=* \\\n  --pallet=pallet-balances \\\n  --steps=50 \\\n  --repeat=20 \\\n  --output \\\n  ./runtimes/spiritnet/src/weights/pallet_balances.rs \\\n  --template \\\n  ./.maintain/weight-template.hbs\n"})})]})}function d(e={}){const{wrapper:t}={...(0,r.a)(),...e.components};return t?(0,a.jsx)(t,{...e,children:(0,a.jsx)(h,{...e})}):h(e)}},1151:(e,t,n)=>{n.d(t,{Z:()=>c,a:()=>o});var a=n(7294);const r={},i=a.createContext(r);function o(e){const t=a.useContext(i);return a.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function c(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:o(e.components),a.createElement(i.Provider,{value:t},e.children)}}}]);