(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[1830],{25380:function(t){function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=function(){return[]},e.resolve=e,e.id=25380,t.exports=e},51909:function(t,e,n){"use strict";var i=n(83117),o=n(67294),a=n(52263),s=n(73945),r=n(28182),c=n(12175),d=n(65488),l=n(85162),u=n(90814);e.Z=t=>{let{children:e,fileName:n,...p}=t;const h=e,{code:m}=(0,c.transform)(h,{plugins:["transform-typescript"],retainLines:!0}),{siteConfig:{customFields:{prettierConfig:b}}}=(0,a.Z)(),f=(0,s.format)(m,{parser:r.parsers.babel.parse,...b}),k=n?`${n}.ts`:void 0,g=n?`${n}.js`:void 0;return o.createElement(d.Z,{groupId:"ts-js-choice"},o.createElement(l.Z,{value:"ts",label:"Typescript",default:!0},o.createElement(u.Z,(0,i.Z)({},p,{className:"language-ts",title:k}),h)),o.createElement(l.Z,{value:"js",label:"Javascript"},o.createElement(u.Z,(0,i.Z)({},p,{className:"language-js",title:g}),f)))}},34354:function(t,e,n){"use strict";n.r(e),n.d(e,{assets:function(){return d},contentTitle:function(){return r},default:function(){return p},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return l}});var i=n(83117),o=(n(67294),n(3905)),a=n(51909);const s={id:"full-did-batch",title:"Sign Extrinsics With a Full DID"},r=void 0,c={unversionedId:"develop/sdk/cookbook/dids/full-did-batch",id:"develop/sdk/cookbook/dids/full-did-batch",title:"Sign Extrinsics With a Full DID",description:"Full DIDs can also be used to batch multiple extrinsics that require the signature of the DID subject.",source:"@site/docs/develop/01_sdk/02_cookbook/01_dids/04_full_did_batch.md",sourceDirName:"develop/01_sdk/02_cookbook/01_dids",slug:"/develop/sdk/cookbook/dids/full-did-batch",permalink:"/docs/develop/sdk/cookbook/dids/full-did-batch",draft:!1,editUrl:"https://github.com/KILTprotocol/docs/edit/master/docs/develop/01_sdk/02_cookbook/01_dids/04_full_did_batch.md",tags:[],version:"current",sidebarPosition:4,frontMatter:{id:"full-did-batch",title:"Sign Extrinsics With a Full DID"},sidebar:"sdk",previous:{title:"Update a Full DID",permalink:"/docs/develop/sdk/cookbook/dids/full-did-update"},next:{title:"Resolve a DID",permalink:"/docs/develop/sdk/cookbook/dids/did-query"}},d={},l=[],u={toc:l};function p(t){let{components:e,...n}=t;return(0,o.kt)("wrapper",(0,i.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,o.kt)("p",null,"Full DIDs can also be used to batch multiple extrinsics that require the signature of the DID subject.\nFor instance, a batch could include the creation of two different CTypes in the same operation.\nThis would save the user the time of producing one additional block and generating one additional signature, as multiple extrinsics are batched and signed at once, and they are submitted and executed in the same block.\nFor more information, see the ",(0,o.kt)("a",{parentName:"p",href:"https://paritytech.github.io/substrate/master/pallet_utility/pallet/struct.Pallet.html"},"official Substrate documentation"),"."),(0,o.kt)("p",null,"An example of a batched creation of two CTypes using the ",(0,o.kt)("inlineCode",{parentName:"p"},"authorizeBatch")," is provided below."),(0,o.kt)(a.Z,{mdxType:"TsJsBlock"},"import * as Kilt from '@kiltprotocol/sdk-js'\n\nfunction getRandomCType(): Kilt.ICType {\n  // Random factor ensures that each created CType is unique and does not already exist on chain.\n  const randomFactor = Kilt.Utils.UUID.generate()\n  return Kilt.CType.fromProperties(`CType ${randomFactor}`, {\n    name: {\n      type: 'string'\n    },\n    age: {\n      type: 'integer'\n    }\n  })\n}\n\nexport async function batchCTypeCreationExtrinsics(\n  submitterAccount: Kilt.KiltKeyringPair,\n  fullDid: Kilt.DidUri,\n  signCallback: Kilt.SignExtrinsicCallback\n): Promise<void> {\n  const api = Kilt.ConfigService.get('api')\n\n  // Create two random demo CTypes.\n  const ctype1 = getRandomCType()\n  const ctype1CreationTx = api.tx.ctype.add(Kilt.CType.toChain(ctype1))\n  const ctype2 = getRandomCType()\n  const ctype2CreationTx = api.tx.ctype.add(Kilt.CType.toChain(ctype2))\n\n  // Create the DID-signed batch.\n  const authorizedBatch = await Kilt.Did.authorizeBatch({\n    batchFunction: api.tx.utility.batchAll,\n    did: fullDid,\n    extrinsics: [ctype1CreationTx, ctype2CreationTx],\n    sign: signCallback,\n    submitter: submitterAccount.address\n  })\n\n  // The authorized account submits the batch to the chain.\n  await Kilt.Blockchain.signAndSubmitTx(authorizedBatch, submitterAccount)\n}\n"))}p.isMDXComponent=!0}}]);