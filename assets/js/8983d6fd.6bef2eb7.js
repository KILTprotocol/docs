(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[5064],{5380:e=>{function t(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}t.keys=()=>[],t.resolve=t,t.id=5380,e.exports=t},1909:(e,t,a)=>{"use strict";a.d(t,{Z:()=>p});var n=a(7462),i=a(7294),o=a(2263),s=a(3945),r=a(8182),l=a(2175),d=a(4866),m=a(5162),c=a(814);const p=e=>{let{children:t,fileName:a,...p}=e;const b=t,{code:h}=(0,l.transform)(b,{plugins:["transform-typescript"],retainLines:!0}),{siteConfig:{customFields:{prettierConfig:u}}}=(0,o.Z)(),k=(0,s.format)(h,{parser:r.parsers.babel.parse,...u}),w=a?`${a}.ts`:void 0,g=a?`${a}.js`:void 0;return i.createElement(d.Z,{groupId:"ts-js-choice"},i.createElement(m.Z,{value:"ts",label:"Typescript",default:!0},i.createElement(c.Z,(0,n.Z)({},p,{className:"language-ts",title:w}),b)),i.createElement(m.Z,{value:"js",label:"Javascript"},i.createElement(c.Z,(0,n.Z)({},p,{className:"language-js",title:g}),k)))}},594:(e,t,a)=>{"use strict";a.r(t),a.d(t,{assets:()=>c,contentTitle:()=>d,default:()=>u,frontMatter:()=>l,metadata:()=>m,toc:()=>p});var n=a(7462),i=(a(7294),a(3905)),o=a(1909);const s="import * as Kilt from '@kiltprotocol/sdk-js'\n\nexport async function releaseWeb3Name(\n  did: Kilt.DidUri,\n  submitterAccount: Kilt.KiltKeyringPair,\n  signCallback: Kilt.SignExtrinsicCallback\n): Promise<void> {\n  const api = Kilt.ConfigService.get('api')\n\n  const web3NameReleaseTx = api.tx.web3Names.releaseByOwner()\n  const authorizedWeb3NameReleaseTx = await Kilt.Did.authorizeTx(\n    did,\n    web3NameReleaseTx,\n    signCallback,\n    submitterAccount.address\n  )\n  await Kilt.Blockchain.signAndSubmitTx(\n    authorizedWeb3NameReleaseTx,\n    submitterAccount\n  )\n}\n",r="import type { KeyringPair } from '@polkadot/keyring/types'\n\nimport * as Kilt from '@kiltprotocol/sdk-js'\n\nexport async function reclaimWeb3NameDeposit(\n  submitterAddress: KeyringPair,\n  web3Name: Kilt.Did.Web3Name\n): Promise<void> {\n  const api = Kilt.ConfigService.get('api')\n\n  // Release the web3name by the deposit payer.\n  const web3NameReleaseTx = api.tx.web3Names.reclaimDeposit(web3Name)\n  await Kilt.Blockchain.signAndSubmitTx(web3NameReleaseTx, submitterAddress)\n}\n",l={id:"web3name-release",title:"Release a web3name"},d=void 0,m={unversionedId:"develop/sdk/cookbook/web3names/web3name-release",id:"develop/sdk/cookbook/web3names/web3name-release",title:"Release a web3name",description:"If a web3name is no longer needed, either the DID owner or the deposit payer can release it, with deposit being released and returned to the original payer.",source:"@site/docs/develop/01_sdk/02_cookbook/02_web3names/03_release.md",sourceDirName:"develop/01_sdk/02_cookbook/02_web3names",slug:"/develop/sdk/cookbook/web3names/web3name-release",permalink:"/docs/develop/sdk/cookbook/web3names/web3name-release",draft:!1,editUrl:"https://github.com/KILTprotocol/docs/edit/master/docs/develop/01_sdk/02_cookbook/02_web3names/03_release.md",tags:[],version:"current",lastUpdatedAt:1690887551,formattedLastUpdatedAt:"Aug 1, 2023",sidebarPosition:3,frontMatter:{id:"web3name-release",title:"Release a web3name"},sidebar:"sdk",previous:{title:"Query Public Credentials for a web3name",permalink:"/docs/develop/sdk/cookbook/web3names/credential-query"},next:{title:"Resolve a web3name",permalink:"/docs/develop/sdk/cookbook/web3names/web3name-query"}},c={},p=[{value:"Releasing a Web3name by the DID Owner",id:"releasing-a-web3name-by-the-did-owner",level:2},{value:"Reclaiming a Web3name Deposit by the Deposit Payer",id:"reclaiming-a-web3name-deposit-by-the-deposit-payer",level:2}],b={toc:p},h="wrapper";function u(e){let{components:t,...a}=e;return(0,i.kt)(h,(0,n.Z)({},b,a,{components:t,mdxType:"MDXLayout"}),(0,i.kt)("p",null,"If a web3name is no longer needed, either the DID owner or the deposit payer can release it, with deposit being released and returned to the original payer."),(0,i.kt)("h2",{id:"releasing-a-web3name-by-the-did-owner"},"Releasing a Web3name by the DID Owner"),(0,i.kt)("p",null,"In the case of the DID owner willing to release the web3name, the following snippet provides a reference implementation on how to achieve that."),(0,i.kt)(o.Z,{mdxType:"TsJsBlock"},s),(0,i.kt)("p",null,"In the code above, the ",(0,i.kt)("inlineCode",{parentName:"p"},"releaseWeb3Name")," function takes the following parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"did"),": The DID URI of the owner."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"submitterAccount"),": The keyring pair of the submitter."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"signCallback"),": The sign extrinsic callback function. This function is used to sign the extrinsic, read more that in ",(0,i.kt)("a",{parentName:"li",href:"/docs/develop/sdk/cookbook/signCallback"},"the SignCallback section"),".")),(0,i.kt)("p",null,"The function ",(0,i.kt)("inlineCode",{parentName:"p"},"releaseWeb3Name")," uses the KILT SDK to create a ",(0,i.kt)("em",{parentName:"p"},"web3name release transaction")," using ",(0,i.kt)("inlineCode",{parentName:"p"},"api.tx.web3Names.releaseByOwner"),".\nIt then authorizes the transaction using the ",(0,i.kt)("inlineCode",{parentName:"p"},"Kilt.Did.authorizeTx")," method and submits the authorized transaction to the blockchain using ",(0,i.kt)("inlineCode",{parentName:"p"},"Kilt.Blockchain.signAndSubmitTx"),".\nThis process ensures that the release transaction is signed by the DID owner."),(0,i.kt)("h2",{id:"reclaiming-a-web3name-deposit-by-the-deposit-payer"},"Reclaiming a Web3name Deposit by the Deposit Payer"),(0,i.kt)("p",null,"If the web3name is being released by the deposit payer, the signature of the DID owner is not required; a regular signed extrinsic can be submitted to the KILT blockchain, as shown below."),(0,i.kt)(o.Z,{mdxType:"TsJsBlock"},r),(0,i.kt)("p",null,"In the code above, the ",(0,i.kt)("inlineCode",{parentName:"p"},"reclaimWeb3NameDeposit")," function takes the following parameters:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"submitterAddress"),": The keyring pair of the submitter."),(0,i.kt)("li",{parentName:"ul"},(0,i.kt)("strong",{parentName:"li"},"web3Name"),": The web3name for which the deposit is to be reclaimed.")),(0,i.kt)("p",null,"The function creates a web3name deposit reclaim transaction using ",(0,i.kt)("inlineCode",{parentName:"p"},"api.tx.web3Names.reclaimDeposit")," and submits the signed transaction to the blockchain using ",(0,i.kt)("inlineCode",{parentName:"p"},"Kilt.Blockchain.signAndSubmitTx"),".\nSince the web3name is being released by the deposit payer, the signature of the DID owner is not required."),(0,i.kt)("p",null,"By using these code examples, you can easily release or reclaim the deposit of a web3name, depending on the scenario and the role of the entity initiating the release."))}u.isMDXComponent=!0}}]);