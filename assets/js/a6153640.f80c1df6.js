(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[6046],{25380:function(t){function e(t){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e}e.keys=function(){return[]},e.resolve=e,e.id=25380,t.exports=e},51909:function(t,e,n){"use strict";var i=n(83117),a=n(67294),o=n(52263),s=n(73945),r=n(28182),c=n(12175),l=n(65488),d=n(85162),u=n(90814);e.Z=t=>{let{children:e,fileName:n,...m}=t;const p=e,{code:h}=(0,c.transform)(p,{plugins:["transform-typescript"],retainLines:!0}),{siteConfig:{customFields:{prettierConfig:k}}}=(0,o.Z)(),f=(0,s.format)(h,{parser:r.parsers.babel.parse,...k}),g=n?`${n}.ts`:void 0,b=n?`${n}.js`:void 0;return a.createElement(l.Z,{groupId:"ts-js-choice"},a.createElement(d.Z,{value:"ts",label:"Typescript",default:!0},a.createElement(u.Z,(0,i.Z)({},m,{className:"language-ts",title:g}),p)),a.createElement(d.Z,{value:"js",label:"Javascript"},a.createElement(u.Z,(0,i.Z)({},m,{className:"language-js",title:b}),f)))}},73369:function(t,e,n){"use strict";n.r(e),n.d(e,{assets:function(){return l},contentTitle:function(){return r},default:function(){return m},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return d}});var i=n(83117),a=(n(67294),n(3905)),o=n(51909);const s={id:"attestation-creation",title:"Attest a Claim (Issue a Credential)"},r=void 0,c={unversionedId:"develop/sdk/cookbook/claiming/attestation-creation",id:"develop/sdk/cookbook/claiming/attestation-creation",title:"Attest a Claim (Issue a Credential)",description:"Once an Attester has received a to-be-attested Credential from a Claimer, they will typically verify the information in the claim.",source:"@site/docs/develop/01_sdk/02_cookbook/04_claiming/03_attestation_creation.md",sourceDirName:"develop/01_sdk/02_cookbook/04_claiming",slug:"/develop/sdk/cookbook/claiming/attestation-creation",permalink:"/docs/develop/sdk/cookbook/claiming/attestation-creation",draft:!1,editUrl:"https://github.com/KILTprotocol/docs/edit/master/docs/develop/01_sdk/02_cookbook/04_claiming/03_attestation_creation.md",tags:[],version:"current",sidebarPosition:3,frontMatter:{id:"attestation-creation",title:"Attest a Claim (Issue a Credential)"},sidebar:"sdk",previous:{title:"Request an Attestation",permalink:"/docs/develop/sdk/cookbook/claiming/attestation-request"},next:{title:"Present a Credential",permalink:"/docs/develop/sdk/cookbook/claiming/presentation-creation"}},l={},d=[],u={toc:d};function m(t){let{components:e,...n}=t;return(0,a.kt)("wrapper",(0,i.Z)({},u,n,{components:e,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"Once an Attester has received a to-be-attested ",(0,a.kt)("inlineCode",{parentName:"p"},"Credential")," from a Claimer, they will typically verify the information in the claim.\nIf the claims correspond to truth, the Attester will proceed by attesting the root hash of the credential on the KILT blockchain, timestamping the attestation operation.\nA deposit is reserved from the balance of the KILT account submitting the creation transaction, which is returned if and when the attestation is removed from the chain."),(0,a.kt)("admonition",{type:"info"},(0,a.kt)("p",{parentName:"admonition"},"An Attester is required to have a full DID with an attestation key.\nTo see how to manage DIDs, please refer to the ",(0,a.kt)("a",{parentName:"p",href:"/docs/develop/sdk/cookbook/dids/full-did-update"},"DID section"),".")),(0,a.kt)(o.Z,{mdxType:"TsJsBlock"},"import * as Kilt from '@kiltprotocol/sdk-js'\n\nexport async function createAttestation(\n  attester: Kilt.DidUri,\n  submitterAccount: Kilt.KiltKeyringPair,\n  signCallback: Kilt.SignExtrinsicCallback,\n  credential: Kilt.ICredential\n): Promise<void> {\n  const api = Kilt.ConfigService.get('api')\n\n  // Create an attestation object and write its root hash on the chain\n  // using the provided attester's full DID.\n  const { cTypeHash, claimHash, delegationId } =\n    Kilt.Attestation.fromCredentialAndDid(credential, attester)\n\n  // Write the attestation info on the chain.\n  const attestationTx = api.tx.attestation.add(\n    claimHash,\n    cTypeHash,\n    delegationId\n  )\n  const authorizedAttestationTx = await Kilt.Did.authorizeTx(\n    attester,\n    attestationTx,\n    signCallback,\n    submitterAccount.address\n  )\n  await Kilt.Blockchain.signAndSubmitTx(\n    authorizedAttestationTx,\n    submitterAccount\n  )\n}\n"))}m.isMDXComponent=!0}}]);