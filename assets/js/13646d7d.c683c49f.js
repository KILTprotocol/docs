"use strict";(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2970],{9561:(e,t,i)=>{i.r(t),i.d(t,{assets:()=>c,contentTitle:()=>a,default:()=>l,frontMatter:()=>s,metadata:()=>o,toc:()=>h});var n=i(4848),r=i(8453);const s={id:"verification",title:"Verification"},a=void 0,o={id:"concepts/credentials/verification",title:"Verification",description:"KILT lets a Verifier check if the information in a credential presented by a Claimer is correct and valid.",source:"@site/docs/concepts/05_credentials/05_verification.md",sourceDirName:"concepts/05_credentials",slug:"/concepts/credentials/verification",permalink:"/docs/concepts/credentials/verification",draft:!1,unlisted:!1,editUrl:"https://github.com/KILTprotocol/docs/edit/master/docs/concepts/05_credentials/05_verification.md",tags:[],version:"current",lastUpdatedAt:1733496053e3,sidebarPosition:5,frontMatter:{id:"verification",title:"Verification"},sidebar:"concepts",previous:{title:"Attestations",permalink:"/docs/concepts/credentials/attestation"},next:{title:"Public Credentials for Assets",permalink:"/docs/concepts/credentials/public-credentials"}},c={},h=[{value:"Requesting a credential from a Claimer",id:"requesting-a-credential-from-a-claimer",level:2},{value:"Example",id:"example",level:3},{value:"Presenting a credential with selective disclosure",id:"presenting-a-credential-with-selective-disclosure",level:2},{value:"Verifying a presentation",id:"verifying-a-presentation",level:2},{value:"Verifying the owner of the presented credential",id:"verifying-the-owner-of-the-presented-credential",level:3},{value:"Verifying the content of the presented credential",id:"verifying-the-content-of-the-presented-credential",level:3}];function d(e){const t={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(t.p,{children:"KILT lets a Verifier check if the information in a credential presented by a Claimer is correct and valid.\nWith the presentation of the credential, the Claimer also presents evidence that a third party (i.e., an Attester) ensured the correctness of the Claimer\u2019s attributes."}),"\n",(0,n.jsx)(t.p,{children:"The Verifier trusts this third party either because they trust their reputation directly or they trust a delegation structure that this Attester is part of.\nFor example, a State department issuing driving licenses."}),"\n",(0,n.jsx)(t.p,{children:"For the verification process:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The Claimer needs their credential and the private key associated with their identifier"}),"\n",(0,n.jsx)(t.li,{children:"The Verifier needs the identifier of the trusted Attester"}),"\n"]}),"\n",(0,n.jsx)(t.p,{children:"During the verification process the Claimer wants to prove the following things to the Verifier:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsx)(t.li,{children:"The credential is valid (i.e., not revoked by its Attester)"}),"\n",(0,n.jsx)(t.li,{children:"The attributes in the credential actually refer to it's Presenter"}),"\n",(0,n.jsx)(t.li,{children:"The credential contains information relevant for the Verifier for this use case"}),"\n",(0,n.jsx)(t.li,{children:"That an Attester ensured the correct and trustworthy-ness of the Claimer's attributes"}),"\n"]}),"\n",(0,n.jsx)(t.h2,{id:"requesting-a-credential-from-a-claimer",children:"Requesting a credential from a Claimer"}),"\n",(0,n.jsx)(t.p,{children:"The Verifier may request a credential from a Claimer, providing the following data:"}),"\n",(0,n.jsxs)(t.ul,{children:["\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"cTypeHash"}),": Which CType hashes the Verifier can work with for the use case. They can provide multiple options, to regard as alternatives."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"trustedAttesters"}),": Which Attesters to consider trusted for each specified CType."]}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"requiredProperties"}),": Which properties for each specified CType must at least be revealed for the Verifier to consider the presentation sufficient."]}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.a,{href:"#presenting-a-credential-with-selective-disclosure",children:"Read more on selective disclosure"}),"."]})}),"\n"]}),"\n",(0,n.jsxs)(t.li,{children:["\n",(0,n.jsxs)(t.p,{children:[(0,n.jsx)(t.code,{children:"challenge"}),": A nonce, which the Verifier can use to ensure that the presentation generated by the Claimer is fresh and not replayed by some other older interactions."]}),"\n"]}),"\n"]}),"\n",(0,n.jsx)(t.h3,{id:"example",children:"Example"}),"\n",(0,n.jsx)(t.pre,{children:(0,n.jsx)(t.code,{className:"language-json",children:'{\n   "body": {\n      "content": {\n         "cTypes": [\n            {\n               "cTypeHash": "0x3291bb126e33b4862d421bfaa1d2f272e6cdfc4f96658988fbcffea8914bd9ac",\n               "trustedAttesters": [\n                  "did:kilt:4pehddkhEanexVTTzWAtrrfo2R7xPnePpuiJLC7shQU894aY"\n               ],\n               "requiredProperties": [\n                  "Email"\n               ]\n            }\n         ],\n         "challenge": "0x5a1a17eca9ddf6b4d14dffb2abd1411fe9235927975a246b3963db86dfb7de5f"\n      },\n      "type": "request-credential"\n   }\n}\n'})}),"\n",(0,n.jsx)(t.h2,{id:"presenting-a-credential-with-selective-disclosure",children:"Presenting a credential with selective disclosure"}),"\n",(0,n.jsxs)(t.p,{children:["Given the ",(0,n.jsx)(t.code,{children:"requiredProperties"})," specified by the Verifier, the Claimer can decide how much of the information they wish to reveal before they generate the presentation and send it to the Verifier.\nIf supported by the Verifier, they can choose to hide attributes and thus only disclose a subset of the original claim data."]}),"\n",(0,n.jsx)(t.admonition,{type:"caution",children:(0,n.jsx)(t.p,{children:"The presentations can still be correlated, since the hash of the credential always stays the same, even when creating new presentations and selecting different attributes to show."})}),"\n",(0,n.jsx)(t.p,{children:"For example, verifying a driving license only requires the verification of the driver's name and picture. A Claimer can decide to hide additional information such as age and place of residence.\nThis increases the privacy of the Claimer since they only need to show attributes required in the specific context."}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:["For a detailed developer-oriented guide to KILT presentation creation, read the ",(0,n.jsx)(t.a,{href:"/docs/develop/sdk/cookbook/claiming/presentation-creation",children:"presentation creation cookbook section"}),"."]})}),"\n",(0,n.jsx)(t.h2,{id:"verifying-a-presentation",children:"Verifying a presentation"}),"\n",(0,n.jsx)(t.p,{children:"The Verifier receives the presentation from the Claimer, re-calculates the root hash of the credential from which the presentation was generated, and queries the KILT blockchain to obtain the associated attestation information, including the revocation status of the credential."}),"\n",(0,n.jsx)(t.p,{children:"If the Claimer tampered with the credential, the re-calculated root hash won't match any attestation on the chain.\nOn the other hand, if the Verifier can find an attestation with the calculated hash on the chain and hasn't been revoked, the credential is valid."}),"\n",(0,n.jsx)(t.p,{children:"However, this doesn't give the Verifier the guarantee that the Claimer is the rightful/legitimate owner of the credential presented."}),"\n",(0,n.jsx)(t.h3,{id:"verifying-the-owner-of-the-presented-credential",children:"Verifying the owner of the presented credential"}),"\n",(0,n.jsxs)(t.p,{children:["When issued, a credential is linked to the KILT decentralized identifier (DID) of the original Claimer.\nThe Verifier can resolve the DID to the public key of the Claimer according to the ",(0,n.jsx)(t.a,{href:"https://github.com/KILTprotocol/spec-kilt-did",children:"KILT DID specification"}),"."]}),"\n",(0,n.jsx)(t.p,{children:"The Verifier assumes that the private key for the DID public key is only known to the owner of the credential, and isn't shared across users.\nTherefore, when requesting the Claimer to generate a presentation, the Verifier challenges the Claimer to sign a nonce (a random number used once) that the Verifier sends together with their request."}),"\n",(0,n.jsx)(t.p,{children:"If the Claimer can sign both the nonce and the presentation with the private key that only the credential's owner should have knowledge of, the Verifier can be sure that the Claimer is the legitimate owner of the credential."}),"\n",(0,n.jsx)(t.h3,{id:"verifying-the-content-of-the-presented-credential",children:"Verifying the content of the presented credential"}),"\n",(0,n.jsxs)(t.p,{children:["After the Verifier has checked that the credential is valid and belongs to the presenting Claimer, they need to verify that they have received all the required information.\nThis is to verify that the presentation received contains the right values ",(0,n.jsx)(t.strong,{children:"and"})," the right semantics."]}),"\n",(0,n.jsxs)(t.p,{children:["For example, the ",(0,n.jsx)(t.code,{children:"age"})," property could have different meanings depending on whether it's defined for a passport CType or a Whisky certificate CType.\nTherefore, the Verifier has to check if the CType matches one of the requested CTypes, and that the properties disclosed in the presentation includes all the properties requested for that CType presentation."]}),"\n",(0,n.jsx)(t.admonition,{type:"info",children:(0,n.jsxs)(t.p,{children:["For a detailed developer-oriented guide to KILT credential verification, read the ",(0,n.jsx)(t.a,{href:"/docs/develop/sdk/cookbook/claiming/presentation-verification",children:"verification cookbook section"}),"."]})})]})}function l(e={}){const{wrapper:t}={...(0,r.R)(),...e.components};return t?(0,n.jsx)(t,{...e,children:(0,n.jsx)(d,{...e})}):d(e)}},8453:(e,t,i)=>{i.d(t,{R:()=>a,x:()=>o});var n=i(6540);const r={},s=n.createContext(r);function a(e){const t=n.useContext(s);return n.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function o(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:a(e.components),n.createElement(s.Provider,{value:t},e.children)}}}]);