(self.webpackChunkdocs=self.webpackChunkdocs||[]).push([[2417],{5380:e=>{function n(e){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}n.keys=()=>[],n.resolve=n,n.id=5380,e.exports=n},1561:(e,n,t)=>{"use strict";t.r(n),t.d(n,{assets:()=>p,contentTitle:()=>h,default:()=>f,frontMatter:()=>d,metadata:()=>m,toc:()=>u});var i=t(5893),r=t(1151),o=(t(9286),t(1909)),s=t(4866),a=t(5162);const l="import * as Kilt from '@kiltprotocol/sdk-js'\nimport { mnemonicGenerate } from '@polkadot/util-crypto'\n\nexport function generateKeypairs(mnemonic = mnemonicGenerate()) {\n  const authentication = Kilt.Utils.Crypto.makeKeypairFromUri(mnemonic)\n\n  const keyAgreement = Kilt.Utils.Crypto.makeEncryptionKeypairFromSeed(\n    Kilt.Utils.Crypto.mnemonicToMiniSecret(mnemonic)\n  )\n\n  return {\n    authentication: authentication,\n    keyAgreement: keyAgreement\n  }\n}\n",c="import { config as envConfig } from 'dotenv'\n\nimport { mnemonicGenerate } from '@polkadot/util-crypto'\n\nimport * as Kilt from '@kiltprotocol/sdk-js'\n\nimport { generateKeypairs } from './generateKeypairs'\n\nexport function generateLightDid(mnemonic: string): Kilt.DidDocument {\n  const { authentication, keyAgreement } = generateKeypairs(mnemonic)\n  return Kilt.Did.createLightDidDocument({\n    authentication: [authentication as Kilt.NewLightDidVerificationKey],\n    keyAgreement: [keyAgreement]\n  })\n}\n\n// Don't execute if this is imported by another file.\nif (require.main === module) {\n  ;(async () => {\n    envConfig()\n\n    try {\n      await Kilt.init()\n\n      const mnemonic = mnemonicGenerate()\n      console.log('\\nsave following to .env to continue\\n')\n      console.log(`CLAIMER_DID_MNEMONIC=\"${mnemonic}\"`)\n    } catch (e) {\n      console.log('Error while setting up claimer DID')\n      throw e\n    }\n  })()\n}\n",d={id:"did",title:"DID"},h=void 0,m={id:"develop/workshop/claimer/did",title:"DID",description:"This section covers creating a light DID using the account you created for the Claimer.",source:"@site/docs/develop/03_workshop/05_claimer/01_did.md",sourceDirName:"develop/03_workshop/05_claimer",slug:"/develop/workshop/claimer/did",permalink:"/docs/develop/workshop/claimer/did",draft:!1,unlisted:!1,editUrl:"https://github.com/KILTprotocol/docs/edit/master/docs/develop/03_workshop/05_claimer/01_did.md",tags:[],version:"current",lastUpdatedAt:1706699542,formattedLastUpdatedAt:"Jan 31, 2024",sidebarPosition:1,frontMatter:{id:"did",title:"DID"},sidebar:"workshop",previous:{title:"\ud83d\udc64 Claimer",permalink:"/docs/develop/workshop/claimer/"},next:{title:"Request an Attestation",permalink:"/docs/develop/workshop/claimer/request"}},p={},u=[{value:"Generate Keys",id:"generate-keys",level:2},{value:"Generate Light DID",id:"generate-light-did",level:2},{value:"Run",id:"run",level:2}];function g(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(n.p,{children:["This section covers creating a light DID using the account you created for the ",(0,i.jsx)("span",{className:"label-role claimer",children:"Claimer"}),"."]}),"\n",(0,i.jsx)(n.p,{children:"Since a light DID is not registered on the blockchain, you don't need funds to create one."}),"\n",(0,i.jsxs)(n.admonition,{type:"info",children:[(0,i.jsx)(n.p,{children:"Remember, light DIDs can do the following:"}),(0,i.jsxs)(n.ul,{children:["\n",(0,i.jsx)(n.li,{children:"Sign attestation requests and presentation with the authentication keys"}),"\n",(0,i.jsx)(n.li,{children:"Encrypt messages with the encryption keys"}),"\n"]}),(0,i.jsxs)(n.p,{children:["Read the ",(0,i.jsx)(n.a,{href:"/docs/develop/sdk/cookbook/dids/light-did-creation",children:"DID documentation"})," to learn more about DIDs and the difference between their light and full versions."]})]}),"\n",(0,i.jsx)(n.h2,{id:"generate-keys",children:"Generate Keys"}),"\n",(0,i.jsx)(n.p,{children:"Like the Attester, the Claimer must also set up the DID keys."}),"\n",(0,i.jsx)(o.Z,{fileName:"claimer/generateKeypairs",children:l}),"\n",(0,i.jsxs)(n.p,{children:["The code above is similar to the ",(0,i.jsx)(n.code,{children:"generateKeyAgreement"})," function used in the Attester section but simpler, as the Claimer only needs an authentication key and an encryption key."]}),"\n",(0,i.jsx)(n.p,{children:"Both the keys are derived from the same seed, but they could also have two different seeds."}),"\n",(0,i.jsx)(n.h2,{id:"generate-light-did",children:"Generate Light DID"}),"\n",(0,i.jsxs)(n.p,{children:["With the ",(0,i.jsx)(n.code,{children:"keypairs"})," generated, you can create the light DID.\nBecause it's off-chain you can create the DID object every time, but you still need to save the mnemonic to the ",(0,i.jsx)(n.code,{children:".env"})," file with a different variable name."]}),"\n",(0,i.jsx)(o.Z,{fileName:"claimer/generateLightDid",children:c}),"\n",(0,i.jsxs)(n.p,{children:["The Claimer doesn't have an ",(0,i.jsx)(n.code,{children:"account"}),", as the Claimer doesn't need to hold funds."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"generateKeypairs"})," function takes the ",(0,i.jsx)(n.code,{children:"mnemonic"})," value and generates the ",(0,i.jsx)(n.code,{children:"authentication"})," and ",(0,i.jsx)(n.code,{children:"keyAgreement"})," keys."]}),"\n",(0,i.jsxs)(n.p,{children:["The ",(0,i.jsx)(n.code,{children:"createLightDidDocument"})," method takes these two values and generates the light DID."]}),"\n",(0,i.jsx)(n.h2,{id:"run",children:"Run"}),"\n",(0,i.jsxs)(s.Z,{groupId:"ts-js-choice",children:[(0,i.jsx)(a.Z,{value:"ts",label:"Typescript",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"yarn ts-node ./claimer/generateLightDid.ts\n"})})}),(0,i.jsx)(a.Z,{value:"js",label:"Javascript",default:!0,children:(0,i.jsx)(n.pre,{children:(0,i.jsx)(n.code,{className:"language-bash",children:"node ./claimer/generateLightDid.js\n"})})})]}),"\n",(0,i.jsx)(n.p,{children:"Well done - You successfully generated a light DID!"})]})}function f(e={}){const{wrapper:n}={...(0,r.a)(),...e.components};return n?(0,i.jsx)(n,{...e,children:(0,i.jsx)(g,{...e})}):g(e)}},1909:(e,n,t)=>{"use strict";t.d(n,{Z:()=>m});t(7294);var i=t(2263),r=t(2175),o=t(4935),s=t(4990),a=t(9966),l=t(4866),c=t(5162),d=t(9286),h=t(5893);const m=e=>{let{children:n,fileName:t,...m}=e;const p=n,{code:u}=(0,r.transform)(p,{plugins:["transform-typescript"],retainLines:!0}),{siteConfig:{customFields:{prettierConfig:g}}}=(0,i.Z)(),f=o.WU(u,{parser:"babel",plugins:[s.Z,a.ZP],...g}).finally((()=>{var e=[{fileName:t?`${t}.ts`:void 0,fileContents:p,fileID:"ts",fileLabel:"Typescript"},{fileName:t?`${t}.js`:void 0,fileContents:f,fileID:"js",fileLabel:"Javascript"}];return(0,h.jsx)(h.Fragment,{children:(0,h.jsx)(l.Z,{groupId:"ts-js-choice",children:e.map((e=>(0,h.jsx)(c.Z,{value:e.fileID,label:e.fileLabel,default:!0,children:(0,h.jsx)(d.Z,{...m,className:"language-"+e.fileID,title:e.fileName,children:e.fileContents})})))})})}))}}}]);